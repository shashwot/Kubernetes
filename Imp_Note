In case the flannel doesn't work and there is an issue with the CoreDNS then use the following:

Make sure you remove the flannel first

kubectl delete -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml
wget https://docs.projectcalico.org/v3.11/manifests/calico.yaml

edit the file calico.yaml --> change 192.168.0.0/16 to be 10.10.0.0/16

then

kubectl apply -f calico.yaml

